/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/dist/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';var _bem=__webpack_require__(1);var _bem2=_interopRequireDefault(_bem);var _canvas=__webpack_require__(2);var _rooms=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var CANVAS_WIDTH=1200;function preloadAssets(){var assets=_bem2.default.getBEMNodes('asset');var promises=[];var _loop=function _loop(i){var promise=new Promise(function(resolve,reject){var asset=assets[i];var img=new Image();img.onload=resolve;img.onerror=reject;img.src=asset.src;});promises.push(promise);};for(var i=0;i<assets.length;i++){_loop(i);}return promises;}function adjustCanvasSize(){_canvas.CANVAS.width=CANVAS_WIDTH;_canvas.CANVAS.height=window.innerHeight;}function main(){Promise.all(preloadAssets()).then(function(){adjustCanvasSize();window.addEventListener('resize',adjustCanvasSize);window.addEventListener('orientationchange',adjustCanvasSize);new _rooms.Level();}).catch(function(e){console.error(e);alert('An error occured, please restart the application.');});}main();

/***/ },
/* 1 */
/***/ function(module, exports, __webpack_require__) {

	!function(e,r){if(true)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var t=r();for(var n in t)("object"==typeof exports?exports:e)[n]=t[n]}}(this,function(){return function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r){"use strict";function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),o=function(){function e(){t(this,e)}return n(e,null,[{key:"getBEMNode",value:function(r,t,n){var o="."+e.getBEMClassName(r,t,n);return document.querySelector(o)}},{key:"getBEMNodes",value:function(r,t,n){var o="."+e.getBEMClassName(r,t,n);return document.querySelectorAll(o)}},{key:"getChildBEMNode",value:function(r,t,n,o){var a="."+e.getBEMClassName(t,n,o);return r.querySelector(a)}},{key:"getChildBEMNodes",value:function(r,t,n,o){var a="."+e.getBEMClassName(t,n,o);return r.querySelectorAll(a)}},{key:"getBEMClassName",value:function(e,r,t){var n=e;return r&&(n+="__"+r),t&&(n+="--"+t),n}},{key:"addModifier",value:function(e,r){var t=e.className.split(" "),n="";for(var o in t)if(t.hasOwnProperty(o)){var a=t[o],i=a+"--"+r;a.match("--")||e.className.match(i)||(n+=a+"--"+r+" ")}e.className=(e.className.trim()+" "+n).trim()}},{key:"removeModifier",value:function(e,r){var t=new RegExp("[^^\\s]+?--"+r+"\\s?","g");e.className=e.className.replace(t,"").trim()}},{key:"toggleModifier",value:function(r,t){return e.hasModifier(r,t)?void e.removeModifier(r,t):void e.addModifier(r,t)}},{key:"hasModifier",value:function(e,r){var t=new RegExp("--"+r+"(?=\\s|$)","g");return e.className.match(t)}}]),e}();r.default=o,r.BEM=o}])});

/***/ },
/* 2 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.CTX=exports.CANVAS=undefined;var _bem=__webpack_require__(1);var _bem2=_interopRequireDefault(_bem);var _rooms=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var CANVAS=exports.CANVAS=_bem2.default.getBEMNode('canvas');var CTX=exports.CTX=CANVAS.getContext('2d');

/***/ },
/* 3 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.Level=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{return get(parent,property,receiver);}}else if("value"in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var _bem=__webpack_require__(1);var _bem2=_interopRequireDefault(_bem);var _mainloop=__webpack_require__(4);var _mainloop2=_interopRequireDefault(_mainloop);var _canvas=__webpack_require__(2);var _enemies=__webpack_require__(5);var _gameclasses=__webpack_require__(6);var _platform=__webpack_require__(8);var _player=__webpack_require__(7);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var ASSET_BACKGROUND_BLUE=_bem2.default.getBEMNode('background',false,'blue');var ASSET_BACKGROUND_CLOUD=_bem2.default.getBEMNode('background',false,'cloud');var ASSET_BACKGROUND_GRAY=_bem2.default.getBEMNode('background',false,'gray');var BACKGROUND_BLUE=new _gameclasses.GameBackground([ASSET_BACKGROUND_BLUE]);var BACKGROUND_GREEN=new _gameclasses.GameBackground([ASSET_BACKGROUND_CLOUD]);var BACKGROUND_GRAY=new _gameclasses.GameBackground([ASSET_BACKGROUND_GRAY]);var MAX_SPEEDH=-30;var SPAWN_OFFSET=320;var Level=exports.Level=function(_GameRoom){_inherits(Level,_GameRoom);function Level(){_classCallCheck(this,Level);var _this=_possibleConstructorReturn(this,(Level.__proto__||Object.getPrototypeOf(Level)).call(this));_this.background1=BACKGROUND_BLUE;_this.background2=BACKGROUND_GREEN;_this.interval=200;_this.level=1;_this.objects=[];_this.poleFactory=new _enemies.PoleFactory();_this.score=0;_this.speedH=-5;_this.screenMessage1=null;_this.screenMessage2=null;clearTimeout(_this.screenMessage2Timeout);_this.setSpeedH(-5);_this.createFloor();_this.createInitialObjects();return _this;}_createClass(Level,[{key:'draw',value:function draw(){this.background1.y=_canvas.CANVAS.clientHeight-_platform.SPRITE_PLATFORM.height/2-_platform.SPRITE_PLATFORM_TOP.height/2-this.background1.height;this.background2.y=0;var grd=_canvas.CTX.createLinearGradient(0,100,0,0);grd.addColorStop(0,"rgb(217, 246, 249)");grd.addColorStop(1,"white");_canvas.CTX.fillStyle=grd;_canvas.CTX.rect(0,0,_canvas.CANVAS.clientWidth,_canvas.CANVAS.clientHeight);_canvas.CTX.fill();this.background2.draw();this.background1.draw();this.objects.forEach(function(object){return object.draw();});this.drawHud();}},{key:'update',value:function update(delta){delta=Math.round(delta);_get(Level.prototype.__proto__||Object.getPrototypeOf(Level.prototype),'update',this).call(this,delta);delta=delta/20;if(this.screenMessage1){return;}this.screenMessage2=null;this.level=Math.ceil(this.score/1000);this.score=Math.round(this.score+delta);this.objects.forEach(function(object){return object.update(delta);});this.background1.update(delta);this.background2.update(delta);this.removeObjectsOutsideRoom();this.updateEnemies(delta);}},{key:'createFloor',value:function createFloor(){var h=_platform.SPRITE_PLATFORM.height;var y=_canvas.CANVAS.clientHeight-_platform.SPRITE_PLATFORM.width/2;var y2=y-_platform.SPRITE_PLATFORM_TOP.height;this.createPlatform(_platform.PlatformBlock,0,y,_canvas.CANVAS.width/_platform.SPRITE_PLATFORM.width+_platform.PLATORM_BUFFER);this.createPlatform(_platform.PlatformBlockTop,0,y2,_canvas.CANVAS.width/_platform.SPRITE_PLATFORM_TOP.width+_platform.PLATORM_BUFFER);}},{key:'createPlatform',value:function createPlatform(gameObjectClass,x,y,n){for(var i=0;i<n;i++){var gameObject=new gameObjectClass(this);gameObject.x=i*gameObject.sprite.width+x;gameObject.y=y;gameObject.speedH=this.speedH;this.objects.push(gameObject);}}},{key:'createInitialObjects',value:function createInitialObjects(){this.createObject(_player.Player,70,_canvas.CANVAS.height-SPAWN_OFFSET);this.updateEnemies(1,true);}},{key:'createObject',value:function createObject(gameObject,x,y){var object=new gameObject(this);object.x=x;object.y=y;this.objects.push(object);}},{key:'removeObjectsOutsideRoom',value:function removeObjectsOutsideRoom(){this.objects=this.objects.filter(function(object){if(object.y<_canvas.CANVAS.clientHeight){return true;}object=null;});}},{key:'updateEnemies',value:function updateEnemies(delta){var force=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var rand=Math.random();if(this.score*delta%this.interval!==0&&force===false){return;}this.level=Math.min(this.level,4);this.setSpeedH(Math.max(this.score/-300-5,MAX_SPEEDH));switch(this.level){case 4:this.interval=150;if(rand>0.75){rand=Math.random();if(rand>0.5){if(rand>0.75){this.createObject(_enemies.EnemyEasy,Math.random()*_canvas.CANVAS.clientWidth/2+_canvas.CANVAS.clientHeight/2,_canvas.CANVAS.height-SPAWN_OFFSET);}else{this.createObject(_enemies.EnemyMedium,Math.random()*_canvas.CANVAS.clientWidth/2+_canvas.CANVAS.clientHeight/2,_canvas.CANVAS.height-SPAWN_OFFSET);}}else{this.createObject(_enemies.FallingBLock,Math.random()*_canvas.CANVAS.clientWidth,_canvas.CANVAS.height-SPAWN_OFFSET);}}else{this.poleFactory.create(this,Math.floor(Math.random()*3),_canvas.CANVAS.clientWidth-50,_canvas.CANVAS.height-SPAWN_OFFSET);}break;case 3:if(rand>0.75){rand=Math.random();if(rand>0.5){this.createObject(_enemies.FallingBLock,Math.random()*_canvas.CANVAS.clientWidth,_canvas.CANVAS.height-SPAWN_OFFSET);}else{this.createObject(_enemies.EnemyEasy,Math.random()*_canvas.CANVAS.clientWidth/2+_canvas.CANVAS.clientHeight/2,_canvas.CANVAS.height-SPAWN_OFFSET);}}else{this.poleFactory.create(this,Math.floor(Math.random()*3),_canvas.CANVAS.clientWidth-50,_canvas.CANVAS.height-SPAWN_OFFSET);}break;case 2:this.poleFactory.create(this,Math.floor(Math.random()*3),_canvas.CANVAS.clientWidth-50,_canvas.CANVAS.height-SPAWN_OFFSET);break;default:this.poleFactory.create(this,1,_canvas.CANVAS.clientWidth-50,_canvas.CANVAS.height-SPAWN_OFFSET);break;}}},{key:'setSpeedH',value:function setSpeedH(value){this.speedH=value;this.background1.speedH=this.speedH/4;this.background2.speedH=this.speedH/20;var objects=this.objects.forEach(function(object){if(object.constructor.name===_platform.PlatformBlock.name||object.constructor.name===_platform.PlatformBlockTop.name){object.speedH=value;}});}},{key:'drawHud',value:function drawHud(){var fontSize=30;_canvas.CTX.font=fontSize+'px pressstart';_canvas.CTX.fillStyle='#FFF';_canvas.CTX.strokeStyle='#000';_canvas.CTX.textAlign='start';_canvas.CTX.fillText('L'+this.level,10,fontSize+10);_canvas.CTX.strokeText('L'+this.level,10,fontSize+10);_canvas.CTX.fillText('S'+-this.speedH.toFixed(1),160,fontSize+10);_canvas.CTX.strokeText('S'+-this.speedH.toFixed(2),160,fontSize+10);_canvas.CTX.fillText('FPS'+parseInt(_mainloop2.default.getFPS()),310,fontSize+10);_canvas.CTX.strokeText('FPS'+parseInt(_mainloop2.default.getFPS()),310,fontSize+10);_canvas.CTX.textAlign='end';_canvas.CTX.fillText(''+this.score,Math.min(window.innerWidth,_canvas.CANVAS.clientWidth)-10,fontSize+10);_canvas.CTX.strokeText(''+this.score,Math.min(window.innerWidth,_canvas.CANVAS.clientWidth)-10,fontSize+10);if(this.screenMessage1){_canvas.CTX.textAlign='center';_canvas.CTX.fillText(this.screenMessage1,window.innerWidth/2,window.innerHeight/2-30);_canvas.CTX.strokeText(this.screenMessage1,window.innerWidth/2,window.innerHeight/2-30);}if(this.screenMessage2){_canvas.CTX.textAlign='center';_canvas.CTX.fillText(this.screenMessage2,window.innerWidth/2,window.innerHeight/2+30);_canvas.CTX.strokeText(this.screenMessage2,window.innerWidth/2,window.innerHeight/2+30);}}},{key:'end',value:function end(){var _this2=this;this.setSpeedH(0);this.screenMessage1='Game over';this.screenMessage2Timeout=setTimeout(function(){_this2.screenMessage2="Tap to restart";_canvas.CANVAS.addEventListener('click',_this2.restart.bind(_this2));_canvas.CANVAS.addEventListener('touchstart',_this2.restart.bind(_this2));},600);}},{key:'restart',value:function restart(){clearTimeout(this.screenMessage2Timeout);if(this.screenMessage1){this.objects.forEach(function(object){object.y=_canvas.CANVAS.clientHeight*2;object=null;});this.constructor();}}}]);return Level;}(_gameclasses.GameRoom);

/***/ },
/* 4 */
/***/ function(module, exports, __webpack_require__) {

	var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/**
	 * mainloop.js 1.0.3-20160320
	 *
	 * @author Isaac Sukin (http://www.isaacsukin.com/)
	 * @license MIT
	 */
	
	!function(a){function b(a){if(v=o(b),!(e+j>a)){for(d+=a-e,e=a,r(a,d),a>g+1e3&&(f=.25*h+.75*f,g=a,h=0),h++,i=0;d>=c;)if(s(c),d-=c,++i>=240){m=!0;break}t(d/c),u(f,m),m=!1}}var c=1e3/60,d=0,e=0,f=60,g=0,h=0,i=0,j=0,k=!1,l=!1,m=!1,n="object"==typeof window?window:a,o=n.requestAnimationFrame||function(){var a=Date.now(),b,d;return function(e){return b=Date.now(),d=Math.max(0,c-(b-a)),a=b+d,setTimeout(function(){e(b+d)},d)}}(),p=n.cancelAnimationFrame||clearTimeout,q=function(){},r=q,s=q,t=q,u=q,v;a.MainLoop={getSimulationTimestep:function(){return c},setSimulationTimestep:function(a){return c=a,this},getFPS:function(){return f},getMaxAllowedFPS:function(){return 1e3/j},setMaxAllowedFPS:function(a){return"undefined"==typeof a&&(a=1/0),0===a?this.stop():j=1e3/a,this},resetFrameDelta:function(){var a=d;return d=0,a},setBegin:function(a){return r=a||r,this},setUpdate:function(a){return s=a||s,this},setDraw:function(a){return t=a||t,this},setEnd:function(a){return u=a||u,this},start:function(){return l||(l=!0,v=o(function(a){t(1),k=!0,e=a,g=a,h=0,v=o(b)})),this},stop:function(){return k=!1,l=!1,p(v),this},isRunning:function(){return k}}, true?!(__WEBPACK_AMD_DEFINE_FACTORY__ = (a.MainLoop), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):"object"==typeof module&&null!==module&&"object"==typeof module.exports&&(module.exports=a.MainLoop)}(this);
	//# sourceMappingURL=mainloop.min.js.map

/***/ },
/* 5 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.PoleTop=exports.Pole=exports.PoleFactory=exports.EnemyMedium=exports.EnemyEasy=exports.FallingBLock=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{return get(parent,property,receiver);}}else if("value"in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var _bem=__webpack_require__(1);var _bem2=_interopRequireDefault(_bem);var _canvas=__webpack_require__(2);var _gameclasses=__webpack_require__(6);var _player=__webpack_require__(7);var _platform=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var ASSET_FALLING_BLOCK=_bem2.default.getBEMNode('block',false,'falling');var SPRITE_FALLING_BLOCK=new _gameclasses.GameSprite([ASSET_FALLING_BLOCK]);var ASSET_ENEMY_EASY=_bem2.default.getBEMNode('enemy',false,'easy');var SPRITE_ENEMY_EASY=new _gameclasses.GameSprite([ASSET_ENEMY_EASY]);var ASSET_ENEMY_MEDIUM=_bem2.default.getBEMNode('enemy',false,'medium');var SPRITE_ENEMY_MEDIUM=new _gameclasses.GameSprite([ASSET_ENEMY_MEDIUM]);var ASSET_POLE=_bem2.default.getBEMNode('pole');var SPRITE_POLE=new _gameclasses.GameSprite([ASSET_POLE]);var ASSET_POLE_TOP=_bem2.default.getBEMNode('pole',false,'top');var SPRITE_POLE_TOP=new _gameclasses.GameSprite([ASSET_POLE_TOP]);var Enemy=function(_GravitatingGameObjec){_inherits(Enemy,_GravitatingGameObjec);function Enemy(){_classCallCheck(this,Enemy);return _possibleConstructorReturn(this,(Enemy.__proto__||Object.getPrototypeOf(Enemy)).apply(this,arguments));}_createClass(Enemy,[{key:'update',value:function update(delta){_get(Enemy.prototype.__proto__||Object.getPrototypeOf(Enemy.prototype),'update',this).call(this,delta);var player=this.room.objects.find(function(object){return object.constructor.name===_player.Player.name;});if(!player){return;}var playerAtBL=player.isAtPosition(this.x-this.sprite.originX,this.y-this.sprite.originY+this.sprite.height);var playerAtBR=player.isAtPosition(this.x-this.sprite.originX+this.sprite.width,this.y-this.sprite.originY+this.sprite.height);if(playerAtBL||playerAtBR){player.die();}}}]);return Enemy;}(_gameclasses.GravitatingGameObject);var DelayedEnemy=function(_Enemy){_inherits(DelayedEnemy,_Enemy);function DelayedEnemy(gameRoom,GameSprite){_classCallCheck(this,DelayedEnemy);var _this2=_possibleConstructorReturn(this,(DelayedEnemy.__proto__||Object.getPrototypeOf(DelayedEnemy)).call(this,gameRoom,GameSprite));_this2.lifeTime=0;_this2.delayTimePassed=false;return _this2;}_createClass(DelayedEnemy,[{key:'update',value:function update(delta){var y=this.y;if(this.lifeTime<100){this.y=y;}else{this.delayTimePassed=true;_get(DelayedEnemy.prototype.__proto__||Object.getPrototypeOf(DelayedEnemy.prototype),'update',this).call(this,delta);}this.lifeTime++;}}]);return DelayedEnemy;}(Enemy);var FallingBLock=exports.FallingBLock=function(_DelayedEnemy){_inherits(FallingBLock,_DelayedEnemy);function FallingBLock(gameRoom){_classCallCheck(this,FallingBLock);var _this3=_possibleConstructorReturn(this,(FallingBLock.__proto__||Object.getPrototypeOf(FallingBLock)).call(this,gameRoom,SPRITE_FALLING_BLOCK));_this3.lifeTime=0;return _this3;}_createClass(FallingBLock,[{key:'collisionBelow',value:function collisionBelow(other){if(other.constructor.name===_player.Player.name){other.die();return;}if(other.constructor.name!==_platform.PlatformBlock.name&&other.constructor.name!==_platform.PlatformBlockTop.name&&other.constructor.name!==this.constructor.name){other.speedH=0;other.y=_canvas.CANVAS.clientHeight*2;}else{}}}]);return FallingBLock;}(DelayedEnemy);var EnemyEasy=exports.EnemyEasy=function(_DelayedEnemy2){_inherits(EnemyEasy,_DelayedEnemy2);function EnemyEasy(gameRoom){_classCallCheck(this,EnemyEasy);return _possibleConstructorReturn(this,(EnemyEasy.__proto__||Object.getPrototypeOf(EnemyEasy)).call(this,gameRoom,SPRITE_ENEMY_EASY));}_createClass(EnemyEasy,[{key:'update',value:function update(delta){_get(EnemyEasy.prototype.__proto__||Object.getPrototypeOf(EnemyEasy.prototype),'update',this).call(this,delta);if(this.delayTimePassed){this.speedH=-3;}}}]);return EnemyEasy;}(DelayedEnemy);var EnemyMedium=exports.EnemyMedium=function(_DelayedEnemy3){_inherits(EnemyMedium,_DelayedEnemy3);function EnemyMedium(gameRoom){_classCallCheck(this,EnemyMedium);return _possibleConstructorReturn(this,(EnemyMedium.__proto__||Object.getPrototypeOf(EnemyMedium)).call(this,gameRoom,SPRITE_ENEMY_MEDIUM));}_createClass(EnemyMedium,[{key:'update',value:function update(delta){_get(EnemyMedium.prototype.__proto__||Object.getPrototypeOf(EnemyMedium.prototype),'update',this).call(this,delta);if(this.delayTimePassed){this.speedH=-5;}}}]);return EnemyMedium;}(DelayedEnemy);var PoleFactory=exports.PoleFactory=function(){function PoleFactory(){_classCallCheck(this,PoleFactory);}_createClass(PoleFactory,[{key:'create',value:function create(gameRoom,levels,x,y){for(var i=0;i<levels;i++){var pole=new Pole(gameRoom);pole.x=x;pole.y=y-i*SPRITE_POLE.height;gameRoom.objects.push(pole);}var poleTop=new PoleTop(gameRoom);poleTop.x=x;poleTop.y=y-levels*SPRITE_POLE.height;gameRoom.objects.push(poleTop);}}]);return PoleFactory;}();var AbstractPole=function(_Enemy2){_inherits(AbstractPole,_Enemy2);function AbstractPole(){_classCallCheck(this,AbstractPole);return _possibleConstructorReturn(this,(AbstractPole.__proto__||Object.getPrototypeOf(AbstractPole)).apply(this,arguments));}_createClass(AbstractPole,[{key:'update',value:function update(delta){_get(AbstractPole.prototype.__proto__||Object.getPrototypeOf(AbstractPole.prototype),'update',this).call(this,delta);var object=this.room.findNearestGameObjectBelowPoint(this.x,this.y,this);if(!object){return;}if(object.constructor.name===Pole.name||object.constructor.name===PoleTop.name){this.x=object.x;}}}]);return AbstractPole;}(Enemy);var Pole=exports.Pole=function(_AbstractPole){_inherits(Pole,_AbstractPole);function Pole(gameRoom){_classCallCheck(this,Pole);return _possibleConstructorReturn(this,(Pole.__proto__||Object.getPrototypeOf(Pole)).call(this,gameRoom,SPRITE_POLE));}return Pole;}(AbstractPole);var PoleTop=exports.PoleTop=function(_AbstractPole2){_inherits(PoleTop,_AbstractPole2);function PoleTop(gameRoom){_classCallCheck(this,PoleTop);return _possibleConstructorReturn(this,(PoleTop.__proto__||Object.getPrototypeOf(PoleTop)).call(this,gameRoom,SPRITE_POLE_TOP));}return PoleTop;}(AbstractPole);

/***/ },
/* 6 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.GameRoom=exports.GravitatingGameObject=exports.GameObject=exports.GameBackground=exports.GameSprite=undefined;var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{return get(parent,property,receiver);}}else if("value"in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _mainloop=__webpack_require__(4);var _mainloop2=_interopRequireDefault(_mainloop);var _canvas=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var AbstractGameImage=function(){function AbstractGameImage(images){var _this=this;_classCallCheck(this,AbstractGameImage);this.animate=true;this.imageDimensions=[];this.image=null;this.images=images;this.imageIndex=0;this.skipFrames=3;this.skippedFrames=0;this.images.forEach(function(image){var imageObject=new Image();imageObject.onload=function(){_this.imageDimensions.push({width:imageObject.width,height:imageObject.height});_this.width=imageObject.width;_this.height=imageObject.height;};imageObject.onerror=function(e){console.error(e);};imageObject.src=image.src;});this.updateImage(1,true);}_createClass(AbstractGameImage,[{key:'update',value:function update(delta){this.updateImage(delta);}},{key:'updateImage',value:function updateImage(delta){var force=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var date=new Date();var time=date.getTime();if(this.animate&&this.skippedFrames>=this.skipFrames||force){this.skippedFrames=0;this.imageIndex=this.imageIndex+1>=this.images.length?0:this.imageIndex+1;this.image=this.images[this.imageIndex];var dimensions=this.imageDimensions[this.imageIndex];if(dimensions){this.width=dimensions.width;this.height=dimensions.height;}}else{this.skippedFrames++;}}}]);return AbstractGameImage;}();var GameSprite=exports.GameSprite=function(_AbstractGameImage){_inherits(GameSprite,_AbstractGameImage);function GameSprite(){_classCallCheck(this,GameSprite);return _possibleConstructorReturn(this,(GameSprite.__proto__||Object.getPrototypeOf(GameSprite)).apply(this,arguments));}_createClass(GameSprite,[{key:'update',value:function update(delta){_get(GameSprite.prototype.__proto__||Object.getPrototypeOf(GameSprite.prototype),'update',this).call(this,delta);this.originX=this.width/2;this.originY=this.height/2;}}]);return GameSprite;}(AbstractGameImage);var GameBackground=exports.GameBackground=function(_AbstractGameImage2){_inherits(GameBackground,_AbstractGameImage2);function GameBackground(images){_classCallCheck(this,GameBackground);var _this3=_possibleConstructorReturn(this,(GameBackground.__proto__||Object.getPrototypeOf(GameBackground)).call(this,images));_this3.x=0;_this3.y=0;_this3.speedH=0;return _this3;}_createClass(GameBackground,[{key:'update',value:function update(delta){_get(GameBackground.prototype.__proto__||Object.getPrototypeOf(GameBackground.prototype),'update',this).call(this,delta);this.x+=this.speedH;if(this.isOutsideRoomLeft()){this.x+=this.width;}}},{key:'isOutsideRoomLeft',value:function isOutsideRoomLeft(){return this.x+this.width<0;}},{key:'draw',value:function draw(){for(var i=0;i+this.width<_canvas.CANVAS.clientWidth;i++){var x=Math.round(this.x+i*this.width);var y=Math.round(this.y);var w=Math.round(this.width);var h=Math.round(this.height);_canvas.CTX.drawImage(this.image,x,y,w,h);}}}]);return GameBackground;}(AbstractGameImage);var GameObject=exports.GameObject=function(){function GameObject(gameRoom,sprite){_classCallCheck(this,GameObject);this.room=gameRoom;this.sprite=sprite;this.x=0;this.y=0;this.speedH=0;this.speedV=0;this.weight=10;}_createClass(GameObject,[{key:'draw',value:function draw(){if(this.isOutsideRoom()){return;}var x=Math.round(this.x-this.sprite.originX);var y=Math.round(this.y-this.sprite.originY);var w=Math.round(this.sprite.width);var h=Math.round(this.sprite.height);_canvas.CTX.drawImage(this.sprite.image,x,y,w,h);}},{key:'update',value:function update(delta){this.sprite.update(delta);if(this.speedH){this.x+=this.speedH*delta;};if(this.speedV){this.y+=this.speedV*delta;};this.checkCollisionBelow();}},{key:'checkCollisionBelow',value:function checkCollisionBelow(){var other=this.room.findNearestGameObjectBelowPoint(this.x,this.y-this.sprite.originY+this.sprite.height+1);if(other){if(other.isAtPosition(this.x,this.y-this.sprite.originY+this.sprite.height+1)){this.collisionBelow(other);}}}},{key:'collisionBelow',value:function collisionBelow(other){}},{key:'isAtPosition',value:function isAtPosition(x,y){var isAtX=x>=this.x-this.sprite.originX&&x<=this.x-this.sprite.originX+this.sprite.width;var isAtY=y>=this.y-this.sprite.originY&&y<=this.y-this.sprite.originY+this.sprite.height;return isAtX&&isAtY;}},{key:'isOutsideRoom',value:function isOutsideRoom(){var isOutsideX=this.x-this.sprite.originX+this.sprite.width<0||this.x-this.sprite.originX>_canvas.CANVAS.width;var isOutsideY=this.y-this.sprite.originY>_canvas.CANVAS.height||this.y-this.sprite.originY+this.sprite.height<0;return isOutsideX||isOutsideY;}}]);return GameObject;}();var GravitatingGameObject=exports.GravitatingGameObject=function(_GameObject){_inherits(GravitatingGameObject,_GameObject);function GravitatingGameObject(gameRoom,sprite){_classCallCheck(this,GravitatingGameObject);var _this4=_possibleConstructorReturn(this,(GravitatingGameObject.__proto__||Object.getPrototypeOf(GravitatingGameObject)).call(this,gameRoom,sprite));_this4.frictionSpeed=0;_this4.gravitySpeed=1;return _this4;}_createClass(GravitatingGameObject,[{key:'update',value:function update(delta){_get(GravitatingGameObject.prototype.__proto__||Object.getPrototypeOf(GravitatingGameObject.prototype),'update',this).call(this,delta);this.checkCollisionBelow();this.applyGravity(delta);this.applyFriction(delta);this.y+=this.gravitySpeed*delta;this.x+=this.frictionSpeed*delta;}},{key:'applyFriction',value:function applyFriction(delta){if(!this.isAirborne()){var floor=this.room.findNearestGameObjectBelowPoint(this.x,this.y-this.sprite.originY+this.sprite.height,this);if(floor){this.frictionSpeed=floor.frictionSpeed||floor.speedH;}}else{this.frictionSpeed=0;}}},{key:'applyGravity',value:function applyGravity(delta){if(this.isAirborne()){this.speedH=0;this.gravitySpeed++;}else{if(this.gravitySpeed&&Math.abs(this.gravitySpeed)<3){this.land(delta);}else{this.gravitySpeed=this.gravitySpeed*-0.25;}}}},{key:'land',value:function land(delta){var target=this.y-this.sprite.originY+this.sprite.height+1*delta;var object=this.room.findNearestGameObjectBelowPoint(this.x,target,this);if(object){var objectTop=object.y-object.sprite.originY;this.y=objectTop-this.sprite.originY;}this.gravitySpeed=0;}},{key:'isAirborne',value:function isAirborne(){var _this5=this;var objects=this.room.objects.filter(function(object){return object!==_this5;});return!objects.find(function(object){return object.isAtPosition(_this5.x,_this5.y-_this5.sprite.originY+_this5.sprite.height+(_this5.gravitySpeed||1));});}},{key:'checkCollisionBelow',value:function checkCollisionBelow(){var other=this.room.findNearestGameObjectBelowPoint(this.x,this.y-this.sprite.originY+this.sprite.height+1);if(other){if(other.isAtPosition(this.x,this.y-this.sprite.originY+this.sprite.height+1)){this.collisionBelow(other);}}}}]);return GravitatingGameObject;}(GameObject);var GameRoom=exports.GameRoom=function(){function GameRoom(){_classCallCheck(this,GameRoom);this.objects=[];_mainloop2.default.setDraw(this.draw.bind(this));_mainloop2.default.setUpdate(this.update.bind(this));_mainloop2.default.start();}_createClass(GameRoom,[{key:'draw',value:function draw(){}},{key:'update',value:function update(delta){}},{key:'findNearestGameObjectBelowPoint',value:function findNearestGameObjectBelowPoint(x,y,notMe){var objects=this.objects.filter(function(object){return object!==notMe;});for(y=y+1;y<=_canvas.CANVAS.height;y++){var object=objects.find(function(object){return object.isAtPosition(x,y);});if(object){return object;}}}},{key:'end',value:function end(){_mainloop2.default.setDraw(null);_mainloop2.default.setUpdate(null);}}]);return GameRoom;}();

/***/ },
/* 7 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.Player=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{return get(parent,property,receiver);}}else if("value"in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var _bem=__webpack_require__(1);var _bem2=_interopRequireDefault(_bem);var _canvas=__webpack_require__(2);var _gameclasses=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var ASSET_PLAYER1=_bem2.default.getBEMNode('player1');var ASSET_PLAYER2=_bem2.default.getBEMNode('player2');var ASSET_PLAYER3=_bem2.default.getBEMNode('player3');var ASSET_PLAYER4=_bem2.default.getBEMNode('player4');var SPRITE_PLAYER=new _gameclasses.GameSprite([ASSET_PLAYER1,ASSET_PLAYER2,ASSET_PLAYER3,ASSET_PLAYER4]);var Player=exports.Player=function(_GravitatingGameObjec){_inherits(Player,_GravitatingGameObjec);function Player(gameRoom){_classCallCheck(this,Player);var _this=_possibleConstructorReturn(this,(Player.__proto__||Object.getPrototypeOf(Player)).call(this,gameRoom,SPRITE_PLAYER));_this.alive=true;_this.jumpStartTime=null;_this.moveX=null;_this.setUpControls();return _this;}_createClass(Player,[{key:'setUpControls',value:function setUpControls(){_canvas.CANVAS.addEventListener('mousedown',this.touchStart.bind(this));_canvas.CANVAS.addEventListener('mousemove',this.tochMove.bind(this));_canvas.CANVAS.addEventListener('mouseup',this.touchEnd.bind(this));_canvas.CANVAS.addEventListener('touchstart',this.touchStart.bind(this));_canvas.CANVAS.addEventListener('touchmove',this.tochMove.bind(this));_canvas.CANVAS.addEventListener('touchend',this.touchEnd.bind(this));}},{key:'touchStart',value:function touchStart(e){e.preventDefault();var date=new Date();this.jumpStartTime=date.getTime();}},{key:'tochMove',value:function tochMove(e){e.preventDefault();var inputX=e.touches?e.touches[0].clientX:e.clientX;this.moveX=Math.min(inputX,_canvas.CANVAS.clientWidth-this.sprite.width);}},{key:'touchEnd',value:function touchEnd(e){e.preventDefault();var date=new Date();var time=date.getTime();if(!this.isAirborne()&&this.jumpStartTime){var velocity=Math.max((time-this.jumpStartTime)/4,20)*this.delta;if(velocity<=100){this.gravitySpeed=Math.max(-velocity,-20);}this.jumpStartTime=null;}}},{key:'update',value:function update(delta){_get(Player.prototype.__proto__||Object.getPrototypeOf(Player.prototype),'update',this).call(this,delta);this.delta=delta;this.sprite.skipFrames=10-Math.abs(this.speedH);if(!this.isAirborne()&&this.alive){var distance=this.moveX-this.x;var distanceSpeed=distance/30;this.speedH=-this.frictionSpeed+distanceSpeed;}if(this.x-this.sprite.originX<=0){this.speedH=Math.max(this.speedH,0);this.frictionSpeed=0;this.x=this.sprite.originX*delta;}if(this.x-this.sprite.originX+this.sprite.width>=_canvas.CANVAS.clientWidth){this.speedH=Math.min(this.speedH,0);}}},{key:'die',value:function die(){this.alive=false;this.speedH=0;this.room.end();}}]);return Player;}(_gameclasses.GravitatingGameObject);

/***/ },
/* 8 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.PlatformBlockTop=exports.PlatformBlock=exports.PLATORM_BUFFER=exports.SPRITE_PLATFORM_TOP=exports.SPRITE_PLATFORM=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{return get(parent,property,receiver);}}else if("value"in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var _bem=__webpack_require__(1);var _bem2=_interopRequireDefault(_bem);var _canvas=__webpack_require__(2);var _gameclasses=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var ASSET_PLATFORM=_bem2.default.getBEMNode('platform');var SPRITE_PLATFORM=exports.SPRITE_PLATFORM=new _gameclasses.GameSprite([ASSET_PLATFORM]);var ASSET_PLATFORM_TOP=_bem2.default.getBEMNode('platform',false,'top');var SPRITE_PLATFORM_TOP=exports.SPRITE_PLATFORM_TOP=new _gameclasses.GameSprite([ASSET_PLATFORM_TOP]);var PLATORM_BUFFER=exports.PLATORM_BUFFER=1;var AbstractPlatformObject=function(_GameObject){_inherits(AbstractPlatformObject,_GameObject);function AbstractPlatformObject(gameRoom,gameSprite){_classCallCheck(this,AbstractPlatformObject);var _this=_possibleConstructorReturn(this,(AbstractPlatformObject.__proto__||Object.getPrototypeOf(AbstractPlatformObject)).call(this,gameRoom,gameSprite));_this.speedH=0;return _this;}_createClass(AbstractPlatformObject,[{key:'update',value:function update(delta){_get(AbstractPlatformObject.prototype.__proto__||Object.getPrototypeOf(AbstractPlatformObject.prototype),'update',this).call(this,delta);if(this.isOutsideRoom()){this.x+=_canvas.CANVAS.clientWidth+PLATORM_BUFFER*this.sprite.width;}}}]);return AbstractPlatformObject;}(_gameclasses.GameObject);var PlatformBlock=exports.PlatformBlock=function(_AbstractPlatformObje){_inherits(PlatformBlock,_AbstractPlatformObje);function PlatformBlock(gameRoom){_classCallCheck(this,PlatformBlock);return _possibleConstructorReturn(this,(PlatformBlock.__proto__||Object.getPrototypeOf(PlatformBlock)).call(this,gameRoom,SPRITE_PLATFORM));}return PlatformBlock;}(AbstractPlatformObject);var PlatformBlockTop=exports.PlatformBlockTop=function(_AbstractPlatformObje2){_inherits(PlatformBlockTop,_AbstractPlatformObje2);function PlatformBlockTop(gameRoom){_classCallCheck(this,PlatformBlockTop);return _possibleConstructorReturn(this,(PlatformBlockTop.__proto__||Object.getPrototypeOf(PlatformBlockTop)).call(this,gameRoom,SPRITE_PLATFORM_TOP));}return PlatformBlockTop;}(AbstractPlatformObject);

/***/ }
/******/ ]);
//# sourceMappingURL=bundle.js.map