{"version":3,"sources":["webpack:///webpack/bootstrap 016389d243d17761c5b3","webpack:///./src/index.js","webpack:///./~/bem.js/dist/bem.js","webpack:///./src/canvas.js","webpack:///./src/rooms.js","webpack:///./~/mainloop.js/build/mainloop.min.js","webpack:///./src/enemies.js","webpack:///./src/gameclasses.js","webpack:///./src/player.js","webpack:///./src/platform.js"],"names":["CANVAS_WIDTH","preloadAssets","assets","getBEMNodes","promises","i","promise","Promise","resolve","reject","asset","img","Image","onload","onerror","src","push","length","adjustCanvasSize","width","height","window","innerHeight","main","all","then","addEventListener","catch","e","console","error","alert","CANVAS","getBEMNode","CTX","getContext","ASSET_BACKGROUND_BLUE","ASSET_BACKGROUND_CLOUD","ASSET_BACKGROUND_GRAY","BACKGROUND_BLUE","BACKGROUND_GREEN","BACKGROUND_GRAY","MAX_SPEEDH","SPAWN_OFFSET","Level","background1","background2","interval","level","objects","poleFactory","score","speedH","screenMessage1","screenMessage2","clearTimeout","screenMessage2Timeout","setSpeedH","createFloor","createInitialObjects","y","clientHeight","grd","createLinearGradient","addColorStop","fillStyle","rect","clientWidth","fill","draw","forEach","object","drawHud","delta","Math","round","ceil","update","removeObjectsOutsideRoom","updateEnemies","h","y2","createPlatform","gameObjectClass","x","n","gameObject","sprite","createObject","filter","force","rand","random","min","max","create","floor","value","constructor","name","fontSize","font","strokeStyle","textAlign","fillText","strokeText","toFixed","parseInt","getFPS","innerWidth","setTimeout","restart","bind","ASSET_FALLING_BLOCK","SPRITE_FALLING_BLOCK","ASSET_ENEMY_EASY","SPRITE_ENEMY_EASY","ASSET_ENEMY_MEDIUM","SPRITE_ENEMY_MEDIUM","ASSET_POLE","SPRITE_POLE","ASSET_POLE_TOP","SPRITE_POLE_TOP","Enemy","player","room","find","playerAtBL","isAtPosition","originX","originY","playerAtBR","die","DelayedEnemy","gameRoom","GameSprite","lifeTime","delayTimePassed","FallingBLock","other","EnemyEasy","EnemyMedium","PoleFactory","levels","pole","Pole","poleTop","PoleTop","AbstractPole","findNearestGameObjectBelowPoint","AbstractGameImage","images","animate","imageDimensions","image","imageIndex","skipFrames","skippedFrames","imageObject","updateImage","date","Date","time","getTime","dimensions","GameBackground","isOutsideRoomLeft","w","drawImage","GameObject","speedV","weight","isOutsideRoom","checkCollisionBelow","collisionBelow","isAtX","isAtY","isOutsideX","isOutsideY","GravitatingGameObject","frictionSpeed","gravitySpeed","applyGravity","applyFriction","isAirborne","abs","land","target","objectTop","GameRoom","setDraw","setUpdate","start","notMe","ASSET_PLAYER1","ASSET_PLAYER2","ASSET_PLAYER3","ASSET_PLAYER4","SPRITE_PLAYER","Player","alive","jumpStartTime","moveX","setUpControls","touchStart","tochMove","touchEnd","preventDefault","inputX","touches","clientX","velocity","distance","distanceSpeed","end","ASSET_PLATFORM","SPRITE_PLATFORM","ASSET_PLATFORM_TOP","SPRITE_PLATFORM_TOP","PLATORM_BUFFER","AbstractPlatformObject","gameSprite","PlatformBlock","PlatformBlockTop"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 016389d243d17761c5b3\n **/","import BEM from 'bem.js';\nimport { CANVAS, CTX } from './canvas';\nimport { Level } from './rooms';\n\n\n/** {number} width of the canvas. */\nconst CANVAS_WIDTH = 1200;\n\n\n/**\n * Preloads all images with class \"asset\".\n * Returns an array of Promise objects, each resolving when asset is loaded.\n */\nfunction preloadAssets() {\n    let assets = BEM.getBEMNodes('asset');\n    let promises = [];\n\n    for (let i=0; i<assets.length; i++) {\n        let promise = new Promise((resolve, reject) => {\n            let asset = assets[i]\n            let img = new Image();\n            img.onload = resolve;\n            img.onerror = reject;\n            img.src = asset.src;\n        });\n\n        promises.push(promise);\n    }\n\n    return promises;\n}\n\n/**\n * Adjust the canvas size to the window size.\n */\nfunction adjustCanvasSize() {\n    CANVAS.width = CANVAS_WIDTH;\n    CANVAS.height = window.innerHeight;\n}\n\n\n/**\n * The main entry point, stats the game.\n */\nfunction main() {\n    Promise.all(preloadAssets())\n        .then(() => {\n            adjustCanvasSize();\n            window.addEventListener('resize', adjustCanvasSize);\n            window.addEventListener('orientationchange', adjustCanvasSize);\n            new Level();\n        })\n        .catch((e) => {\n            console.error(e);\n            alert('An error occured, please restart the application.');\n        });\n}\n\nmain();\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","!function(e,r){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=r();else if(\"function\"==typeof define&&define.amd)define([],r);else{var t=r();for(var n in t)(\"object\"==typeof exports?exports:e)[n]=t[n]}}(this,function(){return function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var t={};return r.m=e,r.c=t,r.p=\"\",r(0)}([function(e,r){\"use strict\";function t(e,r){if(!(e instanceof r))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(r,\"__esModule\",{value:!0});var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),o=function(){function e(){t(this,e)}return n(e,null,[{key:\"getBEMNode\",value:function(r,t,n){var o=\".\"+e.getBEMClassName(r,t,n);return document.querySelector(o)}},{key:\"getBEMNodes\",value:function(r,t,n){var o=\".\"+e.getBEMClassName(r,t,n);return document.querySelectorAll(o)}},{key:\"getChildBEMNode\",value:function(r,t,n,o){var a=\".\"+e.getBEMClassName(t,n,o);return r.querySelector(a)}},{key:\"getChildBEMNodes\",value:function(r,t,n,o){var a=\".\"+e.getBEMClassName(t,n,o);return r.querySelectorAll(a)}},{key:\"getBEMClassName\",value:function(e,r,t){var n=e;return r&&(n+=\"__\"+r),t&&(n+=\"--\"+t),n}},{key:\"addModifier\",value:function(e,r){var t=e.className.split(\" \"),n=\"\";for(var o in t)if(t.hasOwnProperty(o)){var a=t[o],i=a+\"--\"+r;a.match(\"--\")||e.className.match(i)||(n+=a+\"--\"+r+\" \")}e.className=(e.className.trim()+\" \"+n).trim()}},{key:\"removeModifier\",value:function(e,r){var t=new RegExp(\"[^^\\\\s]+?--\"+r+\"\\\\s?\",\"g\");e.className=e.className.replace(t,\"\").trim()}},{key:\"toggleModifier\",value:function(r,t){return e.hasModifier(r,t)?void e.removeModifier(r,t):void e.addModifier(r,t)}},{key:\"hasModifier\",value:function(e,r){var t=new RegExp(\"--\"+r+\"(?=\\\\s|$)\",\"g\");return e.className.match(t)}}]),e}();r.default=o,r.BEM=o}])});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/bem.js/dist/bem.js\n ** module id = 1\n ** module chunks = 0\n **/","import BEM from 'bem.js';\nimport { Level } from './rooms';\n\n\n/** {HTMLCanvasElement} representing the canvas. */\nexport const CANVAS = BEM.getBEMNode('canvas')\n\n/** {CanvasRenderingContext2D} the drawing context. */\nexport const CTX = CANVAS.getContext('2d');\n\n\n/** WEBPACK FOOTER **\n ** ./src/canvas.js\n **/","import BEM from 'bem.js';\nimport MainLoop from 'mainloop.js';\nimport { CANVAS, CTX } from './canvas';\nimport { FallingBLock, EnemyEasy, EnemyMedium, PoleFactory } from './enemies';\nimport { GameSprite, GameBackground, GameRoom } from './gameclasses';\nimport { SPRITE_PLATFORM, SPRITE_PLATFORM_TOP, PLATORM_BUFFER, PlatformBlock, PlatformBlockTop } from './platform';\nimport { Player } from './player';\n\n\n/** {HTMLImageElement} representing the blue background. */\nconst ASSET_BACKGROUND_BLUE = BEM.getBEMNode('background', false, 'blue');\n\n/** {HTMLImageElement} representing the green background. */\nconst ASSET_BACKGROUND_CLOUD = BEM.getBEMNode('background', false, 'cloud');\n\n/** {HTMLImageElement} representing the gray background. */\nconst ASSET_BACKGROUND_GRAY = BEM.getBEMNode('background', false, 'gray');\n\n/** {GameSprite} representing the blue background. */\nconst BACKGROUND_BLUE = new GameBackground([ASSET_BACKGROUND_BLUE]);\n\n/** {GameSprite} representing the green background. */\nconst BACKGROUND_GREEN = new GameBackground([ASSET_BACKGROUND_CLOUD]);\n\n/** {GameSprite} representing the gray background. */\nconst BACKGROUND_GRAY = new GameBackground([ASSET_BACKGROUND_GRAY]);\n\n/** {number} maximum (negative) speed. */\nconst MAX_SPEEDH = -30;\n\n/** {number} Offset in pixels (from bottom of canvas) where objects are spawned. */\nconst SPAWN_OFFSET = 320;\n\n\n/**\n * The playable level.\n * @class\n */\nexport class Level extends GameRoom {\n    constructor() {\n        super();\n        this.background1 = BACKGROUND_BLUE;\n        this.background2 = BACKGROUND_GREEN;\n        this.interval = 200;\n        this.level = 1;\n        this.objects = [];\n        this.poleFactory = new PoleFactory()\n        this.score = 0;\n        this.speedH = -5;\n        this.screenMessage1 = null;\n        this.screenMessage2 = null;\n        clearTimeout(this.screenMessage2Timeout)\n\n        this.setSpeedH(-5);\n        this.createFloor();\n        this.createInitialObjects();\n    }\n\n    /**\n     * Draws everything in this room.\n     */\n    draw() {\n        this.background1.y = CANVAS.clientHeight - SPRITE_PLATFORM.height / 2 - SPRITE_PLATFORM_TOP.height / 2 - this.background1.height;\n        this.background2.y = 0;\n\n\n        let grd=CTX.createLinearGradient(0, 100, 0, 0);\n        grd.addColorStop(0,\"rgb(217, 246, 249)\");\n        grd.addColorStop(1,\"white\");\n\n        CTX.fillStyle=grd;\n        CTX.rect(0, 0, CANVAS.clientWidth, CANVAS.clientHeight);\n        CTX.fill();\n\n        this.background2.draw();\n        this.background1.draw();\n        this.objects.forEach((object) => object.draw());\n        this.drawHud();\n    }\n\n    /**\n     * Update the state of this object.\n     * Gets fired by MainLoop.\n     */\n    update(delta) {\n        delta = Math.round(delta);\n        super.update(delta);\n        delta = delta / 20;\n\n        if (this.screenMessage1) {\n            return;\n        }\n\n        this.screenMessage2 = null;        \n        this.level = Math.ceil(this.score / 1000);\n        this.score = Math.round(this.score + delta);\n        this.objects.forEach((object) => object.update(delta));\n        this.background1.update(delta);\n        this.background2.update(delta);\n        this.removeObjectsOutsideRoom();\n        this.updateEnemies(delta);\n    }\n\n    /**\n     * Creates the bottom floor.\n     */\n    createFloor() {\n        let h = SPRITE_PLATFORM.height;\n        let y = CANVAS.clientHeight - SPRITE_PLATFORM.width / 2;\n        let y2 = y - SPRITE_PLATFORM_TOP.height;\n\n        this.createPlatform(PlatformBlock, 0, y, CANVAS.width / SPRITE_PLATFORM.width + PLATORM_BUFFER);\n        this.createPlatform(PlatformBlockTop, 0, y2, CANVAS.width / SPRITE_PLATFORM_TOP.width + PLATORM_BUFFER);\n    }\n\n    /**\n     * Creates a platform.\n     * @param {class} gameObjectClass.\n     * @param {number} x X position to start placing objects.\n     * @param {number} y Y position to place objects.\n     * @param {number} n Amount of objects.\n     */\n    createPlatform(gameObjectClass, x, y, n) {\n        for (let i=0; i<n; i++) {\n            let gameObject = new gameObjectClass(this);\n            gameObject.x = i * gameObject.sprite.width + x;\n            gameObject.y = y;\n            gameObject.speedH = this.speedH;\n            this.objects.push(gameObject);\n        }\n    }\n\n    /**\n     * Creates the first batch of objects.\n     */\n    createInitialObjects() {\n        this.createObject(Player, 70, CANVAS.height - SPAWN_OFFSET);\n        this.updateEnemies(1, true);\n    }\n\n    /**\n     * Creates a new gameObject at x, y\n     */\n    createObject(gameObject, x, y) {\n        let object = new gameObject(this);\n        object.x = x;\n        object.y = y;\n        this.objects.push(object);\n    }\n\n    /**\n     * Removes objects with y > room height.\n     */\n    removeObjectsOutsideRoom() {\n        this.objects = this.objects.filter((object) => {\n            if (object.y < CANVAS.clientHeight) {\n                return true;\n            }\n            object = null;\n        });\n    }\n\n    /**\n     * Adds enemeis (if needed)\n     */\n    updateEnemies(delta, force=false) {\n        let rand = Math.random();\n\n        // return;\n        if (this.score * delta % this.interval !== 0 && force===false) {\n            return;\n        }\n\n        this.level = Math.min(this.level, 4)\n        this.setSpeedH(Math.max(this.score / -300 - 5, MAX_SPEEDH));\n\n        switch(this.level) {\n            case 4:\n                this.interval = 150;\n\n                if (rand > 0.75) {\n                    rand = Math.random();\n\n                    if (rand > 0.5) {\n                        if (rand > 0.75) {\n                            this.createObject(EnemyEasy, Math.random() * CANVAS.clientWidth / 2 + CANVAS.clientHeight / 2, CANVAS.height - SPAWN_OFFSET);\n                        } else {\n                            this.createObject(EnemyMedium, Math.random() * CANVAS.clientWidth / 2 + CANVAS.clientHeight / 2, CANVAS.height - SPAWN_OFFSET);\n                        }\n                    } else {\n                        this.createObject(FallingBLock, Math.random() * CANVAS.clientWidth, CANVAS.height - SPAWN_OFFSET);\n                    }\n                }\n                else {\n                    this.poleFactory.create(this, Math.floor(Math.random() * 3) , CANVAS.clientWidth - 50, CANVAS.height - SPAWN_OFFSET);\n                } \n                break;\n            case 3:\n                if (rand > 0.75) {\n                    rand = Math.random();\n\n                    if (rand > 0.5) {\n                        this.createObject(FallingBLock, Math.random() * CANVAS.clientWidth, CANVAS.height - SPAWN_OFFSET);\n                    } else {\n                        this.createObject(EnemyEasy, Math.random() * CANVAS.clientWidth / 2 + CANVAS.clientHeight / 2, CANVAS.height - SPAWN_OFFSET);\n                    }\n                } else {\n                    this.poleFactory.create(this, Math.floor(Math.random() * 3) , CANVAS.clientWidth - 50, CANVAS.height - SPAWN_OFFSET);\n                }\n                break;\n            case 2:\n                this.poleFactory.create(this, Math.floor(Math.random() * 3) , CANVAS.clientWidth - 50, CANVAS.height - SPAWN_OFFSET);\n                break;\n            default:\n                this.poleFactory.create(this, 1, CANVAS.clientWidth - 50, CANVAS.height - SPAWN_OFFSET);\n                break;\n        }\n    }\n\n    /**\n     * Sets the speed of the room/game.\n     * @param {number} value The speed.\n     */\n    setSpeedH(value) {\n        this.speedH = value;\n        this.background1.speedH = this.speedH / 4;\n        this.background2.speedH = this.speedH / 20;\n\n        let objects = this.objects.forEach((object) => {\n            if (object.constructor.name === PlatformBlock.name ||\n                object.constructor.name === PlatformBlockTop.name) {\n                    object.speedH = value;\n                }\n        });\n\n    }\n\n    /**\n     * Draws the HUD on the screen.\n     */\n    drawHud() {\n        let fontSize = 30;\n        CTX.font=`${fontSize}px pressstart`;\n        CTX.fillStyle='#FFF';\n        CTX.strokeStyle='#000';\n\n        CTX.textAlign='start';\n        CTX.fillText(`L${this.level}`, 10, fontSize + 10);\n        CTX.strokeText(`L${this.level}`, 10, fontSize + 10);\n\n        CTX.fillText(`S${-this.speedH.toFixed(1)}`, 160, fontSize + 10);\n        CTX.strokeText(`S${-this.speedH.toFixed(2)}`, 160, fontSize + 10);\n\n        CTX.fillText(`FPS${parseInt(MainLoop.getFPS())}`, 310, fontSize + 10);\n        CTX.strokeText(`FPS${parseInt(MainLoop.getFPS())}`, 310, fontSize + 10);\n\n        CTX.textAlign='end';\n        CTX.fillText(`${this.score}`, Math.min(window.innerWidth, CANVAS.clientWidth) - 10, fontSize + 10);\n        CTX.strokeText(`${this.score}`, Math.min(window.innerWidth, CANVAS.clientWidth) - 10, fontSize + 10);\n\n        if (this.screenMessage1) {\n            CTX.textAlign = 'center';\n            CTX.fillText(this.screenMessage1, window.innerWidth / 2, window.innerHeight / 2 - 30);\n            CTX.strokeText(this.screenMessage1, window.innerWidth / 2, window.innerHeight / 2 - 30);\n        }\n\n        if (this.screenMessage2) {\n            CTX.textAlign = 'center';\n            CTX.fillText(this.screenMessage2, window.innerWidth / 2, window.innerHeight / 2 + 30);\n            CTX.strokeText(this.screenMessage2, window.innerWidth / 2, window.innerHeight / 2+ 30);\n        }\n    }\n\n    /**\n     * Stops the room.\n     * TODO: Score's, menu's 'n stuff...\n     */\n    end() {\n        this.setSpeedH(0);\n        this.screenMessage1 = 'Game over';\n        this.screenMessage2Timeout = setTimeout(() => {\n            this.screenMessage2 = \"Tap to restart\"\n            CANVAS.addEventListener('click', this.restart.bind(this));\n            CANVAS.addEventListener('touchstart', this.restart.bind(this));\n        }, 600)\n    }\n\n    restart() {\n        clearTimeout(this.screenMessage2Timeout);\n\n        if (this.screenMessage1) {\n            this.objects.forEach((object) => {\n                object.y = CANVAS.clientHeight * 2;\n                object = null;\n            });\n\n            this.constructor();\n        }\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/rooms.js\n **/","/**\n * mainloop.js 1.0.3-20160320\n *\n * @author Isaac Sukin (http://www.isaacsukin.com/)\n * @license MIT\n */\n\n!function(a){function b(a){if(v=o(b),!(e+j>a)){for(d+=a-e,e=a,r(a,d),a>g+1e3&&(f=.25*h+.75*f,g=a,h=0),h++,i=0;d>=c;)if(s(c),d-=c,++i>=240){m=!0;break}t(d/c),u(f,m),m=!1}}var c=1e3/60,d=0,e=0,f=60,g=0,h=0,i=0,j=0,k=!1,l=!1,m=!1,n=\"object\"==typeof window?window:a,o=n.requestAnimationFrame||function(){var a=Date.now(),b,d;return function(e){return b=Date.now(),d=Math.max(0,c-(b-a)),a=b+d,setTimeout(function(){e(b+d)},d)}}(),p=n.cancelAnimationFrame||clearTimeout,q=function(){},r=q,s=q,t=q,u=q,v;a.MainLoop={getSimulationTimestep:function(){return c},setSimulationTimestep:function(a){return c=a,this},getFPS:function(){return f},getMaxAllowedFPS:function(){return 1e3/j},setMaxAllowedFPS:function(a){return\"undefined\"==typeof a&&(a=1/0),0===a?this.stop():j=1e3/a,this},resetFrameDelta:function(){var a=d;return d=0,a},setBegin:function(a){return r=a||r,this},setUpdate:function(a){return s=a||s,this},setDraw:function(a){return t=a||t,this},setEnd:function(a){return u=a||u,this},start:function(){return l||(l=!0,v=o(function(a){t(1),k=!0,e=a,g=a,h=0,v=o(b)})),this},stop:function(){return k=!1,l=!1,p(v),this},isRunning:function(){return k}},\"function\"==typeof define&&define.amd?define(a.MainLoop):\"object\"==typeof module&&null!==module&&\"object\"==typeof module.exports&&(module.exports=a.MainLoop)}(this);\n//# sourceMappingURL=mainloop.min.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/mainloop.js/build/mainloop.min.js\n ** module id = 4\n ** module chunks = 0\n **/","import BEM from 'bem.js';\nimport { CANVAS, CTX } from './canvas';\nimport { GameSprite, GravitatingGameObject } from './gameclasses';\nimport { Player } from './player';\nimport { PlatformBlock, PlatformBlockTop } from './platform';\n\n\n/** {HTMLImageElement} representing the falling block. */\nconst ASSET_FALLING_BLOCK = BEM.getBEMNode('block', false, 'falling');\n\n/** {GameSprite} representing the the falling block. */\nconst SPRITE_FALLING_BLOCK = new GameSprite([ASSET_FALLING_BLOCK]);\n\n/** {HTMLImageElement} representing the easy enemy. */\nconst ASSET_ENEMY_EASY = BEM.getBEMNode('enemy', false, 'easy');\n\n/** {GameSprite} representing the the easy enemy. */\nconst SPRITE_ENEMY_EASY = new GameSprite([ASSET_ENEMY_EASY]);\n\n/** {HTMLImageElement} representing the easy enemy. */\nconst ASSET_ENEMY_MEDIUM = BEM.getBEMNode('enemy', false, 'medium');\n\n/** {GameSprite} representing the the easy enemy. */\nconst SPRITE_ENEMY_MEDIUM = new GameSprite([ASSET_ENEMY_MEDIUM]);\n\n/** {HTMLImageElement} representing the pole. */\nconst ASSET_POLE = BEM.getBEMNode('pole');\n\n/** {GameSprite} representing the the pole. */\nconst SPRITE_POLE = new GameSprite([ASSET_POLE]);\n\n/** {HTMLImageElement} representing the pole top. */\nconst ASSET_POLE_TOP = BEM.getBEMNode('pole', false, 'top');\n\n/** {GameSprite} representing the the pole top. */\nconst SPRITE_POLE_TOP = new GameSprite([ASSET_POLE_TOP]);\n\n\n/**\n * A generic enemy.\n * @abstract\n */\nclass Enemy extends GravitatingGameObject {\n    /**\n     * Update the state of this object.\n     * Gets fired by MainLoop.\n     */\n    update(delta) {\n        super.update(delta);\n        \n        let player = this.room.objects.find((object) => object.constructor.name === Player.name);\n        \n        if (!player) {\n            return;\n        }\n\n        let playerAtBL = player.isAtPosition(this.x - this.sprite.originX, this.y - this.sprite.originY + this.sprite.height);\n        let playerAtBR = player.isAtPosition(this.x - this.sprite.originX + this.sprite.width, this.y - this.sprite.originY + this.sprite.height);\n\n        if (playerAtBL || playerAtBR) {\n            player.die();  // So sorry...\n        }\n    }\n}\n\n\n/**\n * A generic \"delayed\" enemy..\n * @abstract\n */\nclass DelayedEnemy extends Enemy {\n    /**\n     * Constructor method.\n     * @param {GameRoom} gameRoom\n     * @param {GameSprite} gameSprite\n     */\n    constructor(gameRoom, GameSprite) {\n        super(gameRoom, GameSprite)\n        this.lifeTime = 0;\n        this.delayTimePassed = false;\n    }\n\n    /**\n     * Update the state of this object.\n     * Gets fired by MainLoop.\n     */\n    update(delta) {\n        let y = this.y;\n\n        if (this.lifeTime < 100) {\n            this.y = y;\n        } else {\n            this.delayTimePassed = true;\n            super.update(delta);\n        }\n\n        this.lifeTime++;\n    }\n}\n\n\n/**\n * A simple falling block enemy.\n * @class\n */\nexport class FallingBLock extends DelayedEnemy {\n    /**\n     * Constructor method.\n     * @param {GameRoom} gameRoom\n     * @param {GameSprite} gameSprite\n     */\n    constructor(gameRoom) {\n        super(gameRoom, SPRITE_FALLING_BLOCK)\n        this.lifeTime = 0;\n    }\n\n    /**\n     * Sets the sprite height of otheer to 0 of not a platform.\n     */\n    collisionBelow(other) {\n        if (other.constructor.name === Player.name) {\n            other.die();\n            return;\n        }\n\n        if (\n            other.constructor.name !== PlatformBlock.name &&\n            other.constructor.name !== PlatformBlockTop.name &&\n            other.constructor.name !== this.constructor.name\n        ) {\n            other.speedH = 0;\n            other.y = CANVAS.clientHeight * 2 // bye\n        } else {\n        }\n    }\n}\n\n\n/**\n * A simple falling block enemy.\n * @class\n */\nexport class EnemyEasy extends DelayedEnemy {\n    /**\n     * Constructor method.\n     * @param {GameRoom} gameRoom\n     * @param {GameSprite} gameSprite\n     */\n    constructor(gameRoom) {\n        super(gameRoom, SPRITE_ENEMY_EASY)\n    }\n\n    /**\n     * Update the state of this object.\n     * Gets fired by MainLoop.\n     */\n    update(delta) {\n        super.update(delta);\n        \n        if (this.delayTimePassed) {\n            this.speedH = -3;\n        }\n    }\n}\n\n\n/**\n * A simple falling block enemy.\n * @class\n */\nexport class EnemyMedium extends DelayedEnemy {\n    /**\n     * Constructor method.\n     * @param {GameRoom} gameRoom\n     * @param {GameSprite} gameSprite\n     */\n    constructor(gameRoom) {\n        super(gameRoom, SPRITE_ENEMY_MEDIUM)\n    }\n\n    /**\n     * Update the state of this object.\n     * Gets fired by MainLoop.\n     */\n    update(delta) {\n        super.update(delta);\n        \n        if (this.delayTimePassed) {\n            this.speedH = -5;\n        }\n    }\n}\n\n\n/**\n * Exposes a constructor creating Pole & PoleTop objects.\n * @class\n */\nexport class PoleFactory {\n    /**\n     * Creates a pole.\n     * @param {GameRoom} gameRoom\n     * @param {number} levels Amount of (non top) poles..\n     */\n    create(gameRoom, levels, x, y) {\n        for (let i=0; i<levels; i++) {\n            let pole = new Pole(gameRoom);\n            pole.x = x;\n            pole.y = y - i * SPRITE_POLE.height;\n            gameRoom.objects.push(pole);\n        }\n        let poleTop = new PoleTop(gameRoom);\n        poleTop.x = x;\n        poleTop.y = y - levels * SPRITE_POLE.height;\n        gameRoom.objects.push(poleTop);\n    }\n}\n\n\n/**\n * A generic pole.\n */\nclass AbstractPole extends Enemy {\n    /**\n     * Update the state of this object.\n     * Gets fired by MainLoop.\n     */\n    update(delta) {\n        super.update(delta);\n        let object = this.room.findNearestGameObjectBelowPoint(this.x, this.y, this);\n\n        if (!object ) {\n            return;\n        }\n        \n        if (object.constructor.name === Pole.name || object.constructor.name === PoleTop.name) {\n            this.x = object.x;\n        }\n    }\n}\n\n\n/**\n * A simple falling block enemy.\n * @class\n */\nexport class Pole extends AbstractPole {\n    /**\n     * Constructor method.\n     * @param {GameRoom} gameRoom\n     * @param {GameSprite} gameSprite\n     */\n    constructor(gameRoom) {\n        super(gameRoom, SPRITE_POLE)\n    }\n}\n\n\n/**\n * A simple falling block enemy.\n * @class\n */\nexport class PoleTop extends AbstractPole {\n    /**\n     * Constructor method.\n     * @param {GameRoom} gameRoom\n     * @param {GameSprite} gameSprite\n     */\n    constructor(gameRoom) {\n        super(gameRoom, SPRITE_POLE_TOP)\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/enemies.js\n **/","import MainLoop from 'mainloop.js';\nimport { CANVAS, CTX } from './canvas';\n\n\n/**\n *  Base class for sprites and bakcground.\n * @abstract\n */\nclass AbstractGameImage {\n    /**\n     * Constructor method.\n     * @param {Array} array of canvas image resources.\n     */\n    constructor(images) {\n        this.animate = true;\n        this.imageDimensions = [];\n        this.image = null;\n        this.images = images;\n        this.imageIndex = 0;\n        this.skipFrames = 3;\n        this.skippedFrames = 0;\n\n        this.images.forEach((image) => {\n            let imageObject = new Image();\n            imageObject.onload = () => {\n                this.imageDimensions.push({ width: imageObject.width, height: imageObject.height });\n                this.width = imageObject.width;\n                this.height = imageObject.height;\n            }\n            imageObject.onerror = (e) => { console.error(e); }\n            imageObject.src = image.src;\n        });\n\n        this.updateImage(1, true);\n    }\n\n    /**\n     * Update the state of this sprite.\n     * Gets fired by MainLoop.\n     */\n    update(delta) {\n        this.updateImage(delta);\n    }\n\n    /**\n     * Loads the next image if time since last update > this.imageSpeed.\n     * @param {boolean} [force=false]\n     */\n    updateImage(delta, force=false) {\n        let date = new Date();\n        let time = date.getTime();\n\n        if ((this.animate && this.skippedFrames >= this.skipFrames) || force) {\n            this.skippedFrames = 0;\n            this.imageIndex = (this.imageIndex + 1 >= this.images.length) ? 0 : this.imageIndex + 1;\n            this.image = this.images[this.imageIndex];\n\n            let dimensions = this.imageDimensions[this.imageIndex];\n            if (dimensions) {\n                this.width = dimensions.width;\n                this.height = dimensions.height;\n            }\n        } else {\n            this.skippedFrames++;\n        }\n    }\n}\n\n/**\n * Represents a sprite (a game image).\n * @class\n */\nexport class GameSprite extends AbstractGameImage {\n    /**\n     * Constructor method.\n     * @param {Array} array of canvas image resources.\n     */\n    update(delta) {\n        super.update(delta);\n        this.originX = this.width / 2;\n        this.originY = this.height / 2;\n    }\n}\n\n\n/**\n * Represents a sprite (a game image).\n * @class\n */\nexport class GameBackground extends AbstractGameImage {\n    /**\n     * Constructor method.\n     * @param {Array} array of canvas image resources.\n     */\n    constructor(images) {\n        super(images);\n        this.x = 0;\n        this.y = 0;\n        this.speedH = 0;\n    }\n\n    /**\n     * Update the state of this sprite.\n     * Gets fired by MainLoop.\n     */\n    update(delta) {\n        super.update(delta);\n        this.x += this.speedH;\n\n        if(this.isOutsideRoomLeft()) {\n            this.x += this.width;\n        }\n    }\n\n    /**\n     * Returns whether this object is outside the room/canvas. \n     * @returns {boolean}\n     */\n    isOutsideRoomLeft() {\n        return this.x + this.width < 0;\n    }\n\n    draw() {\n        for (let i=0; i+this.width < CANVAS.clientWidth; i++) {\n            let x = Math.round(this.x + i * this.width);\n            let y = Math.round(this.y);\n            let w = Math.round(this.width);\n            let h = Math.round(this.height);\n\n            CTX.drawImage(this.image, x, y, w, h);\n        }\n    }\n}\n\n\n/**\n * Represents an object in the game (player, platform block etc.).\n * @abstract\n */\nexport class GameObject {\n    /**\n     * Constructor method.\n     * @param {GameRoom} gameRoom\n     * @param {GameSprite} sprite\n     */\n    constructor(gameRoom, sprite) {\n        this.room = gameRoom;\n        this.sprite = sprite;\n        this.x = 0;\n        this.y = 0;\n        this.speedH = 0;\n        this.speedV = 0;\n        this.weight = 10;\n    }\n\n    /**\n     * Draws the sprite of this object on CTX.\n     * Gets fired by MainLoop.\n     */\n    draw() {\n        if (this.isOutsideRoom()) {\n            return;\n        }\n\n        let x = Math.round(this.x - this.sprite.originX);\n        let y = Math.round(this.y - this.sprite.originY);\n        let w = Math.round(this.sprite.width);\n        let h = Math.round(this.sprite.height);\n\n        CTX.drawImage(this.sprite.image, x, y, w, h);\n    }\n\n    /**\n     * Update the state of this object.\n     * Gets fired by MainLoop.\n     */\n    update(delta) {\n        this.sprite.update(delta);\n        \n        if (this.speedH) {\n            this.x += this.speedH * delta;\n        };\n\n        if (this.speedV) {\n            this.y += this.speedV * delta;\n        };\n\n        this.checkCollisionBelow();\n    };\n\n    /**\n     * Checks if there is a collision below.\n     */\n    checkCollisionBelow() {\n        let other = this.room.findNearestGameObjectBelowPoint(this.x, this.y - this.sprite.originY + this.sprite.height + 1);\n        if (other) {\n            if (other.isAtPosition(this.x, this.y - this.sprite.originY + this.sprite.height + 1)) {\n                this.collisionBelow(other);\n            }\n        }\n    }\n\n    /**\n     * Logic to call when there is a collision below this object.\n     * @param {GameObject} other.\n     */\n    collisionBelow(other) {\n    }\n\n    /**\n     * Returns whether this object's bounding box is present at x, y coordinates.\n     * @param {number} x\n     * @param {number} y\n     * @returns {boolean}\n     */\n    isAtPosition(x, y) {\n        let isAtX = (x >= this.x - this.sprite.originX && x <= this.x - this.sprite.originX + this.sprite.width);\n        let isAtY = (y >= this.y - this.sprite.originY && y <= this.y - this.sprite.originY + this.sprite.height);\n        return isAtX && isAtY;\n    }\n\n    /**\n     * Returns whether this object is outside the room/canvas. \n     * @returns {boolean}\n     */\n    isOutsideRoom() {\n        let isOutsideX = (this.x - this.sprite.originX + this.sprite.width < 0 || this.x - this.sprite.originX > CANVAS.width);\n        let isOutsideY = (this.y - this.sprite.originY > CANVAS.height || this.y - this.sprite.originY + this.sprite.height < 0);\n        return isOutsideX || isOutsideY;\n    }\n}\n\n\n/**\n * A game object that is affected by gravity.\n * @abstract\n */\nexport class GravitatingGameObject extends GameObject {\n    /**\n     * Constructor method.\n     * @param {GameRoom} gameRoom\n     * @param {GameSprite} sprite\n     */\n    constructor(gameRoom, sprite) {\n        super(gameRoom, sprite);\n        this.frictionSpeed = 0;\n        this.gravitySpeed = 1;\n    }\n\n    /**\n     * Update the state of this object.\n     * Gets fired by MainLoop.\n     */\n    update(delta) {\n        super.update(delta);\n        this.checkCollisionBelow();\n\n        this.applyGravity(delta);\n        this.applyFriction(delta);\n        this.y += this.gravitySpeed * delta;\n        this.x += this.frictionSpeed * delta;\n    }\n\n    applyFriction(delta) {\n        if (!this.isAirborne()) {\n            let floor = this.room.findNearestGameObjectBelowPoint(this.x, this.y - this.sprite.originY + this.sprite.height, this);\n            if (floor) {\n                this.frictionSpeed = floor.frictionSpeed || floor.speedH;\n            }\n        } else {\n            this.frictionSpeed = 0;\n            // this.speedH--;\n        }\n    }\n\n    /**\n     * Controls gravitation parameters.\n     * Calls this.land() if not falling/bouncing.\n     */\n    applyGravity(delta) {\n        if (this.isAirborne()) {\n            this.speedH = 0;\n            this.gravitySpeed++;\n        } else {\n            if (this.gravitySpeed && Math.abs(this.gravitySpeed) < 3) {\n                this.land(delta);            \n            } else {\n                this.gravitySpeed = this.gravitySpeed * -0.25;\n            }\n        }\n    }\n\n    /**\n     * Stops gravitating, snaps to the floor.\n     */\n    land(delta) {\n        let target = this.y - this.sprite.originY + this.sprite.height + 1 * delta;\n        let object = this.room.findNearestGameObjectBelowPoint(this.x, target, this);\n        \n        if (object) {\n            let objectTop = object.y - object.sprite.originY;\n            this.y = objectTop - this.sprite.originY\n        }\n\n        this.gravitySpeed = 0;\n    }\n\n    /**\n     * Returns wheter this object is in airbone (no contact with an object below).\n     * @param {boolean}\n     */\n    isAirborne() {\n        let objects = this.room.objects.filter((object) => object !== this);\n        return !objects.find((object) => object.isAtPosition(this.x, this.y - this.sprite.originY + this.sprite.height + (this.gravitySpeed || 1)))\n    }\n\n    /**\n     * Checks if there is a collision below.\n     */\n    checkCollisionBelow() {\n        let other = this.room.findNearestGameObjectBelowPoint(this.x, this.y - this.sprite.originY + this.sprite.height + 1);\n        if (other) {\n            if (other.isAtPosition(this.x, this.y - this.sprite.originY + this.sprite.height + 1)) {\n                this.collisionBelow(other);\n            }\n        }\n    }\n}\n\n/**\n * A room/view (level, menu).\n * @abstract\n */\nexport class GameRoom {\n    constructor() {\n        this.objects = [];\n\n        MainLoop.setDraw(this.draw.bind(this));\n        MainLoop.setUpdate(this.update.bind(this));\n        MainLoop.start();\n    }\n\n    draw() {}\n\n    update(delta) {}\n\n    findNearestGameObjectBelowPoint(x, y, notMe) {\n        let objects = this.objects.filter((object) => object !== notMe);\n\n        for (y=y+1; y<=CANVAS.height; y++) {\n            let object = objects.find(object => object.isAtPosition(x, y));\n            \n            if (object) {\n                return object;\n            }\n        }\n    }\n\n    end() {\n        MainLoop.setDraw(null);\n        MainLoop.setUpdate(null);\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/gameclasses.js\n **/","import BEM from 'bem.js';\nimport { CANVAS, CTX } from './canvas';\nimport { GameSprite, GravitatingGameObject } from './gameclasses';\n\n\n/** {HTMLImageElement} representing player image 1. */\nconst ASSET_PLAYER1 = BEM.getBEMNode('player1');\n\n/** {HTMLImageElement} representing player image 2. */\nconst ASSET_PLAYER2 = BEM.getBEMNode('player2');\n\n/** {HTMLImageElement} representing player image 3. */\nconst ASSET_PLAYER3 = BEM.getBEMNode('player3');\n\n/** {HTMLImageElement} representing player image 4. */\nconst ASSET_PLAYER4 = BEM.getBEMNode('player4');\n\n/** {GameSprite} representing the player. */\nconst SPRITE_PLAYER = new GameSprite([ASSET_PLAYER1, ASSET_PLAYER2, ASSET_PLAYER3, ASSET_PLAYER4]);\n\n\nexport class Player extends GravitatingGameObject {\n    constructor(gameRoom) {\n        super(gameRoom, SPRITE_PLAYER);\n        this.alive = true;\n        this.jumpStartTime = null;\n        this.moveX = null;\n\n        this.setUpControls();\n    }\n\n    setUpControls() {\n        CANVAS.addEventListener('mousedown', this.touchStart.bind(this));\n        CANVAS.addEventListener('mousemove', this.tochMove.bind(this));\n        CANVAS.addEventListener('mouseup', this.touchEnd.bind(this));\n        CANVAS.addEventListener('touchstart', this.touchStart.bind(this));\n        CANVAS.addEventListener('touchmove', this.tochMove.bind(this));\n        CANVAS.addEventListener('touchend', this.touchEnd.bind(this));\n    }\n\n    touchStart(e) {\n        e.preventDefault();\n\n        // Jump\n        let date = new Date();\n        this.jumpStartTime = date.getTime();\n    }\n\n    tochMove(e) {\n        e.preventDefault();\n\n        // Move\n        let inputX = (e.touches) ? e.touches[0].clientX : e.clientX;\n        this.moveX = Math.min(inputX, CANVAS.clientWidth - this.sprite.width);\n    }\n\n    touchEnd(e) {\n        e.preventDefault();\n        \n        // Jump\n        let date = new Date();\n        let time = date.getTime();\n\n        if (!this.isAirborne() && this.jumpStartTime) {\n            let velocity = Math.max((time - this.jumpStartTime) / 4, 20) * this.delta;\n\n            if (velocity <= 100) {\n                this.gravitySpeed = Math.max(-velocity, -20);\n            }\n            \n            this.jumpStartTime = null;\n        }\n    }\n\n    update(delta) {\n        super.update(delta);\n        this.delta = delta;\n\n        this.sprite.skipFrames = 10 - Math.abs(this.speedH);\n\n        if (!this.isAirborne() && this.alive) {\n            let distance = this.moveX - this.x\n            let distanceSpeed = distance / 30;\n            this.speedH = -this.frictionSpeed + distanceSpeed;\n        }\n\n        if (this.x - this.sprite.originX <= 0) {\n            this.speedH = Math.max(this.speedH, 0);\n            this.frictionSpeed = 0;\n            this.x = this.sprite.originX * delta;\n        }\n\n        if (this.x - this.sprite.originX + this.sprite.width >= CANVAS.clientWidth) {\n            this.speedH = Math.min(this.speedH, 0);\n        }\n    }\n\n    /**\n     * Trigger game over, player dies.\n     */\n    die() {\n        this.alive = false;\n        this.speedH = 0;\n        this.room.end();\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/player.js\n **/","import BEM from 'bem.js';\nimport { CANVAS } from './canvas';\nimport { GameSprite, GameObject } from './gameclasses';\n\n\n/** {HTMLImageElement} representing the platform block. */\nconst ASSET_PLATFORM = BEM.getBEMNode('platform');\n\n/** {GameSprite} representing the the platform block. */\nexport const SPRITE_PLATFORM = new GameSprite([ASSET_PLATFORM]);\n\n/** {HTMLImageElement} representing the platform block top. */\nconst ASSET_PLATFORM_TOP = BEM.getBEMNode('platform', false, 'top')\n\n/** {GameSprite} representing the the platform block top. */\nexport const SPRITE_PLATFORM_TOP = new GameSprite([ASSET_PLATFORM_TOP]);\n\n/** {number} Amount of platform blocks to render ahead. */\nexport const PLATORM_BUFFER = 1;\n\n\n/**\n * Base class for platform object.\n * @abstract\n */\nclass AbstractPlatformObject extends GameObject {\n    /**\n     * Constructor method.\n     * @param {GameRoom} gameRoom\n     * @param {GameSprite} gameSprite\n     */\n    constructor(gameRoom, gameSprite) {\n        super(gameRoom, gameSprite)\n        this.speedH = 0;\n    }\n\n    /**\n     * Update the state of this object.\n     * Gets fired by MainLoop.\n     */\n    update(delta) {\n        super.update(delta);        \n        if (this.isOutsideRoom()) {\n            this.x += CANVAS.clientWidth + PLATORM_BUFFER * this.sprite.width;\n        }\n    }\n}\n\n\n/**\n * A block as part of the floor or platform.\n * @class\n */\nexport class PlatformBlock extends AbstractPlatformObject {\n    /**\n     * Constructor method.\n     * @param {GameRoom} gameRoom\n     */\n    constructor(gameRoom) {\n        super(gameRoom, SPRITE_PLATFORM);\n    }\n}\n\n\n/**\n * The top layer as part of the floor or platform.\n * @class\n */\nexport class PlatformBlockTop extends AbstractPlatformObject {\n    /**\n     * Constructor method.\n     * @param {GameRoom} gameRoom\n     */\n    constructor(gameRoom) {\n        super(gameRoom, SPRITE_PLATFORM_TOP)\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/platform.js\n **/"],"sourceRoot":""}